{"version":3,"file":"Show.service.js","sourceRoot":"","sources":["../../../../../../src/reward/+show/Show.service.ts"],"names":[],"mappings":"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","sourcesContent":["import {Injectable} from '@angular/core';\nimport {Http, Response,URLSearchParams,Headers, RequestOptions} from '@angular/http';\nimport { Observable } from 'rxjs/Observable';\nimport {baseUrl} from '../services/config';\n\nexport class ShowProgram {\n    constructor(public cRPId: number, public cRPRewardType: number, public cRPName?: string, public cRPNameShow?: number,\n        public cRPSubtitle?: string, public cRPSubtitleShow?: number, public cRPbackgroundAdd?: string,\n        public cRPbackgroundShow?: number, public cRPDesc?: string, public cRPDescShow?: number,\n        public cRPValidType?: number, public cRPRate?: number,\n        public cRPRateContent?: number, public totalRewards?: number,public cRPValidStartDate?: string,public cRPValidEndDate?: string) {\n\n    }\n}\n\n@Injectable()\nexport class ShowService {\n    programs: ShowProgram[];\n\n    constructor(private http: Http) {\n\n    }\n\n    ngOnInit() {\n\n    }\n    /**\n     * 根据ID查询展示型奖励\n     * @param  {[number]} id [ID]\n     * @return {[Observables]}      [observables 数据]\n     */\n    getOne(id) {\n        return this.http.get(baseUrl+'/rewardManage/info/query/' + id).map(res => res.json()).catch(this.handleError);\n    }\n\n    /**\n     * 新增和修改展示型奖励\n     * @param  {[object]} data [插入数据]\n     * @return {[Observables]}      [observables 数据]\n     */\n    add(data) {\n        let base = baseUrl+'/rewardManage/show/';\n        let URL;\n\n        if (data.cRPId === null ||data.cRPId === undefined || isNaN(data.cRPId)) {\n            URL = base + 'add' //新增\n        } else {\n            URL = base + 'edit'//修改\n        }\n        //加工数据\n        data.cRPNameShow = data.cRPNameShow ? 1 : 0;\n        data.cRPSubtitleShow = data.cRPSubtitleShow ? 1 : 0;\n        data.cRPBackgroundShow = data.cRPBackgroundShow ? 1 : 0;\n        data.cRPDescShow = data.cRPDescShow ? 1 : 0;\n        let body = JSON.stringify(data);\n        let headers = new Headers({ 'Content-Type': 'application/json' });\n        let options = new RequestOptions({ headers: headers });\n        return this.http.post(URL, body, options).map(res => res.json()).catch(this.handleError);\n    }\n    /**\n     * 删除展示型奖励\n     * @param  {[number]} id\n     * @return {[Observables]}  [observables 数据]\n     */\n    delete(id){\n      let URL = baseUrl+'/rewardManage/status/edit';\n      let data = {cRPId:id,cRPStatus:0};//0删除,1发放中,2暂停中\n      let body = JSON.stringify(data);\n      let headers = new Headers({ 'Content-Type': 'application/json' });\n      let options = new RequestOptions({ headers: headers });\n      return this.http.post(URL,body,options).map(res => res.json()).catch(this.handleError);\n    }\n    /**\n     * 发放/暂停展示型奖励\n     * @param  {[type]} id\n     * @param  {[type]} state [0删除,1发放中,2暂停中]\n     * @return {[type]}       [observables 数据]\n     */\n    putState(id,state){\n      let URL = baseUrl+'/rewardManage/status/edit';\n      let data = {cRPId:id,cRPStatus:state};//0删除,1发放中,2暂停中\n      let body = JSON.stringify(data);\n      let headers = new Headers({ 'Content-Type': 'application/json' });\n      let options = new RequestOptions({ headers: headers });\n      return this.http.post(URL,body,options).map(res => res.json()).catch(this.handleError);\n    }\n    /**\n     * 关联项目\n     * @param  {[object]} params [cRPId,queryType:[1当前正在关联的/2所有的关联的，包括历史]]\n     * @return {[Observables]}   [observables 数据]\n     */\n    projectsList(params){\n      let search = new URLSearchParams();\n      search.set('cRPId', params.cRPId);\n      search.set('queryType', params.queryType);\n      let URL = baseUrl+'/rewardManage/projects/list';\n      return this.http.get(URL,{search:search}).map(res => res.json()).catch(this.handleError);\n    }\n    /**\n     * 奖励列表\n     * @param  {[object]} params [cRPId,startDate,endDate,projectId,cRPDId]\n     * @return {[Observables]}   [observables 数据]\n     */\n     showList(params){\n      let search = new URLSearchParams();\n      search.set('cRPId', params.cRPId);\n      search.set('range', params.range);\n      search.set('startDate', params.startDate);\n      search.set('endDate', params.endDate);\n      if(params.range=='-1'){\n        search.set('startDate', '');\n        search.set('endDate', '');\n      }\n      search.set('projectId', params.projectId);\n      search.set('currentPage', params.currentPage + '');\n      search.set('pageSize', params.pageSize + '');\n      let URL = baseUrl+'/rewardManage/show/list';\n      return this.http.get(URL,{search:search}).map(res => res.json()).catch(this.handleError);\n    }\n    /**\n     * 发放总量\n     * @param  {[object]} id [奖励ID]\n     * @return {[Observables]}   [observables 数据]\n     */\n    totalList(id){\n      let URL = baseUrl+'/rewardManage/show/total/'+id;\n      return this.http.get(URL).map(res => res.json()).catch(this.handleError);\n    }\n    /**\n     * 追加数量\n     * @param  {[type]} data [description]\n     * @return {[type]}      [description]\n     */\n    addTotal(data){\n      let URL = baseUrl+'/rewardManage/nums/append';\n      let body = JSON.stringify(data);\n      let headers = new Headers({ 'Content-Type': 'application/json' });\n      let options = new RequestOptions({ headers: headers });\n      return this.http.post(URL, body, options).map(res => res.json()).catch(this.handleError);\n    }\n\n    private handleError(error: any) {\n        // In a real world app, we might use a remote logging infrastructure\n        let errMsg = error.message || 'Server error';\n        console.error(errMsg); // log to console instead\n        return Observable.throw(errMsg);\n    }\n}\n"]}