{"version":3,"file":"account.add.component.js","sourceRoot":"","sources":["../../../../../../../src/reward/+account/add/account.add.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {Component, Input, Output} from '@angular/core';\nimport {ROUTER_DIRECTIVES, Router, RouteSegment} from '@angular/router';\nimport {Http, Response, HTTP_PROVIDERS} from '@angular/http';\nimport 'rxjs/Rx';\nimport { Observable } from 'rxjs/Observable';\nimport { FORM_DIRECTIVES, ControlGroup, FormBuilder } from '@angular/common';\nimport * as moment from 'moment';\nimport * as _ from 'lodash';\nimport { Md5 } from 'ts-md5/dist/md5';\n\n\nimport {AccountService} from '../Account.service';\nimport {Validators} from '../../services/Validators';\n\n@Component({\n  moduleId:module.id,\n    selector: 'account-add',\n    templateUrl: 'template.html',\n    styleUrls: ['style.min.css'],\n    directives: [ROUTER_DIRECTIVES, FORM_DIRECTIVES],\n    providers: [AccountService, HTTP_PROVIDERS],\n})\n\nexport class AccountAddComponent {\n    params: any;\n    errorMessage: any;\n    subAccount:any;\n    id: number;\n    checkPwd: string;\n    data: any;\n    constructor(private as: AccountService, private router: Router, params: RouteSegment) {\n        this.params = {};\n        this.subAccount = {};\n        this.subAccount.cRCUId = this.id = +params.getParam('id');\n    }\n    ngOnInit() {\n        this.getOne();\n    }\n\n    getOne() {\n        if (this.id === undefined || isNaN(this.id)) return;\n        this.as.getOne(this.id).subscribe(data => this.setAccount(data),\n            error => { this.errorMessage = <any>error; alert(error) });\n    }\n\n    setAccount(data) {\n        if (data.error.state !== 0) {\n            alert(data.error.msg);\n            return;\n        }\n        data.data.cRCUPassword = '';\n        this.subAccount = data.data;\n    }\n\n    onSubmit() {\n        if (this.subAccount.cRCUPassword === undefined || this.subAccount.cRCUPassword === null || this.subAccount.cRCUPassword === '') {\n            alert('密码不能为空');\n            return;\n        }\n        if (this.subAccount.cRCUPassword !== this.checkPwd) {\n            alert('2次输入密码不一致');\n            return;\n        }\n        this.data = _.assign({}, this.subAccount); //脱钩\n        this.data.cRCUPassword = Md5.hashStr(this.data.cRCUPassword);\n        this.as.add(this.subAccount).subscribe(data => {\n            if (data.error.state !== 0) {\n                alert(data.error.msg);\n                return;\n            }\n            alert('成功');\n            this.toHome();\n        },\n            error => { this.errorMessage = <any>error; alert(error) });\n    }\n\n    toHome() {\n        this.router.navigate(['/account/list']);\n    }\n    goBack() {\n        window.history.back();\n    }\n}\n"]}